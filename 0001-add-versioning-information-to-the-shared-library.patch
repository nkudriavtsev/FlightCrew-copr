From 25677e82473c7ccca823358dc1c133e612a7080f Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Dan=20Hor=C3=A1k?= <dan[at]danny.cz>
Date: Wed, 18 Jan 2012 20:38:14 +0100
Subject: [PATCH 01/12] add versioning information to the shared library

---
 CMakeLists.txt                | 2 ++
 src/FlightCrew/CMakeLists.txt | 5 +++++
 2 files changed, 7 insertions(+)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 30a6a76..5536c43 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -20,6 +20,8 @@ set( FLIGHTCREW_MAJOR_VERSION 0 )
 set( FLIGHTCREW_MINOR_VERSION 7 )
 set( FLIGHTCREW_REVISION_VERSION 2 )
 set( FLIGHTCREW_FULL_VERSION ${FLIGHTCREW_MAJOR_VERSION}.${FLIGHTCREW_MINOR_VERSION}.${FLIGHTCREW_REVISION_VERSION} )
+set( FLIGHTCREW_SOVERSION ${FLIGHTCREW_FULL_VERSION} )
+set( FLIGHTCREW_LIBVERSION ${FLIGHTCREW_SOVERSION} )
 
 # Check if platform is 64 bit
 if( NOT APPLE )
diff --git a/src/FlightCrew/CMakeLists.txt b/src/FlightCrew/CMakeLists.txt
index 77538e7..4ce09e2 100644
--- a/src/FlightCrew/CMakeLists.txt
+++ b/src/FlightCrew/CMakeLists.txt
@@ -78,6 +78,11 @@ if( BUILD_SHARED_FC )
     # when they want a dll, but NOT FC_DLL_EXPORTING
     add_definitions( -DFC_DLL_EXPORTING -DFC_BUILT_AS_DLL )
     add_library( ${PROJECT_NAME} SHARED ${SOURCES} )
+    set_target_properties( ${PROJECT_NAME} PROPERTIES
+        VERSION "${FLIGHTCREW_LIBVERSION}"
+        SOVERSION "${FLIGHTCREW_SOVERSION}"
+        OUTPUT_NAME "${PROJECT_NAME}"
+    )
 else()
     add_library( ${PROJECT_NAME} ${SOURCES} )
 endif()
-- 
1.8.5.3

